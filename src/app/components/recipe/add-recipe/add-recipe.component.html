<h2 class="title">Create new recipe</h2>

<section class="form">
  <form [formGroup]="recipeForm" (ngSubmit)="onSubmit()">
    <div class="name-desc">
      <mat-form-field appearance="fill" class="name">
        <mat-label>Name</mat-label>
        <input matInput type="text" formControlName="name" />
      </mat-form-field>

      <mat-form-field appearance="fill" class="desc">
        <mat-label>Description</mat-label>
        <textarea matInput formControlName="description"></textarea>
      </mat-form-field>
    </div>

    <h3>Preparation time</h3>
    <mat-form-field appearance="fill" class="mr">
      <mat-label>Minutes</mat-label>
      <input matInput type="number" formControlName="preparationTimeInMinutes" />
    </mat-form-field>

    <h3>Ingredients</h3>
    <div formArrayName="ingredients">
      <ng-container *ngFor="let ingredient of ingredients.controls; let index = index">
        <ng-container [formGroupName]="index">
          <div>
            <mat-form-field appearance="fill" class="mr">
              <mat-label>Name</mat-label>
              <input matInput type="text" formControlName="name" />
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>Quantity</mat-label>
              <input matInput type="text" formControlName="quantity" />
            </mat-form-field>
          </div>
        </ng-container>
      </ng-container>

      <button type="button" (click)="addNextIngredient()" mat-button>Add ingredient <mat-icon>add</mat-icon></button>
    </div>

    <button type="submit" [disabled]="recipeForm.invalid" mat-raised-button color="primary">Create</button>
  </form>
</section>
